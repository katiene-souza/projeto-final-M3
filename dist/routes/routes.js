"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.router = void 0;
const express_1 = require("express");
const userModule_1 = require("../app/users/userModule");
const storageConfig_1 = require("../config/storageConfig");
const authModule_1 = require("../app/auth/authModule");
const authenticate_1 = require("../common/middlewares/authenticate");
const patientModule_1 = require("../app/patients/patientModule");
const timelineModule_1 = require("../app/timeline/timelineModule");
const occurrenceModule_1 = require("../app/occurrences/occurrenceModule");
exports.router = (0, express_1.Router)();
const authController = authModule_1.AuthModule.build().authControler;
const userController = userModule_1.UserModule.build().userControler;
const patientController = patientModule_1.PatientModule.build().patientControler;
const timelineController = timelineModule_1.TimelineModule.build().timelineControler;
const occurrenceController = occurrenceModule_1.occurenceModule.build().occurrenceController;
exports.router.post('/users', storageConfig_1.upload.single('photo'), userController.createUser.bind(userController));
exports.router.post('/auth', authController.login.bind(authController));
exports.router.use(authenticate_1.Authenticate.execute);
exports.router.patch('/users/:userId', userController.userUpdate.bind(userController));
exports.router.delete('/users/:userId', userController.deleteUser.bind(userController));
exports.router.post('/users/:userId/patients', patientController.createPatient.bind(patientController));
exports.router.get('/users/:userId/patients', patientController.findAllPatientByUser.bind(patientController));
exports.router.get('/users/:userId/patients/:patientId', patientController.findPatientById.bind(patientController));
exports.router.patch('/users/:userId/patients/:patientId', patientController.patientUpadate.bind(patientController));
exports.router.post('/patients/:patientId/timelines', timelineController.createTimeline.bind(timelineController));
exports.router.get('/patients/:patientId/timelines/:timelineId', timelineController.findTimelineById.bind(timelineController));
exports.router.patch('/patients/:patientId/timelines/:timelineId', timelineController.timelineUpadate.bind(timelineController));
exports.router.post('/timelines/:timelineId/occurrences', occurrenceController.createOccurrence.bind(occurrenceController));
exports.router.get('/timelines/:timelineId/occurrences', occurrenceController.findAllOccurenceByTimeline.bind(occurrenceController));
exports.router.get('/timelines/:timelineId/occurrences/:occurrenceId', occurrenceController.findOccurenceById.bind(occurrenceController));
exports.router.patch('/timelines/:timelineId/occurrences/:occurrenceId', occurrenceController.occurrenceUpadate.bind(occurrenceController));
